# 项目配置
project:
  name: "DINOv2-Crack-Detection"
  version: "1.0"
  author: "Your Name"
  
# 数据配置
data:
  # 数据集路径
  train_img_dir: "data/DeepCrack/train_images"
  train_lab_dir: "data/DeepCrack/train_labels"
  val_img_dir: "data/DeepCrack/val_images"
  val_lab_dir: "data/DeepCrack/val_labels"
  test_img_dir: "data/DeepCrack/test_images"
  test_lab_dir: "data/DeepCrack/test_labels"
  
  # 数据参数
  image_size: 224
  augment: true
  normalize_mean: [0.485, 0.456, 0.406]
  normalize_std: [0.229, 0.224, 0.225]
  
  # 数据集统计
  crack_pixel_ratio: 0.035  # 裂缝像素比例（约3.5%）

# 模型配置
model:
  type: "base"  # base, lipschitz, dual_teacher, full
  
  # 基础配置
  backbone_type: "dinov2_vitb14"
  input_size: 224
  
  # 蒸馏配置（用于dual_teacher和full模型）
  distill_config:
    distill_layers_base: [3, 7, 11]
    distill_layers_large: [7, 15, 23]
    temperature: 3.0
    large_weight: 0.6
    base_weight: 0.4
    distill_weight: 0.3
  
  # Lipschitz配置（用于lipschitz和full模型）
  lip_config:
    use_spectral_norm: true
    use_gradient_penalty: true
    lambda_lip: 0.05
    target_L: 0.8

# 训练配置
training:
  # 基础参数
  epochs: 50
  batch_size: 8
  val_batch_size: 1
  num_workers: 4
  
  # 优化器
  optimizer: "adamw"
  lr: 1e-4
  lr_backbone: 1e-5
  lr_decoder: 1e-4
  weight_decay: 0.01
  
  # 学习率调度
  scheduler: "cosine"
  warmup_epochs: 5
  
  # 损失函数
  crack_weight: 4.0
  seg_weight: 0.7
  distill_weight: 0.3
  
  # 训练策略
  gradient_clip: 1.0
  early_stopping_patience: 20
  save_interval: 10
  
  # 结果目录
  result_dir: "results"
  log_interval: 10

# 测试配置
testing:
  batch_size: 1
  threshold: 0.5
  eval_pgd: true
  pgd_epsilon: 0.03
  pgd_alpha: 0.01
  pgd_iterations: 10

# 硬件配置
hardware:
  device: "cuda"  # cuda, cpu
  gpu_ids: [0]
  precision: "fp32"  # fp32, fp16
  benchmark: true